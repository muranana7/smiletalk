<header>
  <h1 class="site-title">パスワード再登録</h1>
</header>

<div class="login-wrapper">
  <div class="card">

    <!-- フラッシュメッセージ -->
    <% if flash[:notice] %>
      <div class="alert alert-success"><%= flash[:notice] %></div>
    <% elsif flash[:alert] %>
      <div class="alert alert-danger"><%= flash[:alert] %></div>
    <% end %>

    <!-- パスワード再登録フォーム -->
    <%= form_with model: @user, url: update_password_path, method: :patch, local: true do |f| %>

      <!-- ニックネーム表示（ログイン済みは disabled） -->
      <div class="form-group">
        <%= f.label :nickname, "● ニックネーム" %>
        <%= f.text_field :nickname, class: "input-field", value: @user.nickname, disabled: @user.persisted? %>
      </div>

      <!-- メールアドレス表示／入力 -->
      <div class="form-group">
        <%= f.label :email, "● メールアドレス" %>
        <% if @user.persisted? %>
          <!-- ログイン済みは表示のみ -->
          <%= f.email_field :email, class: "input-field", value: @user.email, disabled: true %>
        <% else %>
          <!-- 未ログインは入力可能 -->
          <%= f.email_field :email, class: "input-field", required: true %>
        <% end %>
      </div>

      <!-- 新しいパスワード入力 -->
      <div class="form-group">
        <%= f.label :password, "● 新しいパスワード" %>
        <%= f.password_field :password, class: "input-field", required: true %>
      </div>

      <!-- 送信ボタン -->
      <%= f.submit "再登録", class: "btn-main" %>

    <% end %>

  </div>

  <!-- 戻るリンク -->
  <div class="links">
    <%= link_to "戻る", root_path, class: "link-main" %>
  </div>
</div>
